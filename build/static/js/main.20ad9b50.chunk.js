(this["webpackJsonpcms-task"]=this["webpackJsonpcms-task"]||[]).push([[0],{143:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=n(7),s=n(9),l=n(193),j=n(196),u=n(198),d=n(199),b=n(144),p=n(200),h=n(219),m=n(201),x=n(86),O=n.n(x),f=n(87),g=n.n(f),v=n(15),y=n(12),w="CHANGE_THEME",k="OPEN_SNACKBAR",S="CLOSE_SNACKBAR",N=n(2),F=Object(a.createContext)(),C=function(e,t){switch(t.type){case w:return localStorage.setItem("theme",t.theme),Object(y.a)(Object(y.a)({},e),{},{theme:t.theme,hasChanged:!!t.hasChanged});case k:return Object(y.a)(Object(y.a)({},e),{},{snackbarOpen:!0,snackbarMessage:t.message,snackbarError:t.error});case S:return Object(y.a)(Object(y.a)({},e),{},{snackbarOpen:!1});default:return Object(y.a)({},e)}},z=function(e){var t,n={theme:null!==(t=localStorage.getItem("theme"))&&void 0!==t?t:"light",hasChanged:!1,snackbarOpen:!1,snackbarError:!1,snackbarMessage:""},r=Object(a.useReducer)(C,n),c=Object(v.a)(r,2),o=c[0],i=c[1];return Object(N.jsx)(F.Provider,{value:Object(y.a)({setTheme:function(e,t){return i({type:w,theme:e,hasChanged:t})},openSnackbar:function(e,t){return i({type:k,error:e,message:t})},closeSnackbar:function(){return i({type:S})}},o),children:e.children})},B=Object(a.createContext)(),E=n(21),A=n(5),I=Object(l.a)((function(e){return{appbar:{backdropFilter:"blur(20px)",backgroundColor:e.palette.background.paper+"B7",padding:"0px 30px"},toolbar:{padding:"0px",maxWidth:"1280px",width:"100%",margin:"auto"},name:Object(i.a)({fontWeight:"bold",fontSize:"18px",color:e.palette.text.primary,marginRight:"20px",textDecoration:"none"},e.breakpoints.down("xs"),{display:"none"}),link:Object(i.a)({fontWeight:"normal",fontSize:"16px",color:e.palette.text.primary,marginRight:"20px",textDecoration:"none"},e.breakpoints.down("xs"),{display:"none"}),activeLink:{fontWeight:"bold"},spacer:{flexGrow:"1"},button:{marginRight:"10px"},iconSpacer:{width:"24px",height:"24px"},icon:{position:"absolute"}}})),L=[{name:"Blog",href:"/blog"},{name:"Pracownicy",href:"/specialists"}],D=function(){var e=I(),t=Object(a.useContext)(F),n=t.theme,r=t.setTheme,c=Object(a.useContext)(B),o=c.username,l=c.isLoggedIn,x=c.handleLogout,f=Object(s.f)(),v=Object(s.e)();return Object(N.jsx)(j.a,{elevation:3,className:e.appbar,color:"transparent",children:Object(N.jsxs)(u.a,{className:e.toolbar,children:[Object(N.jsx)(d.a,{underline:"none",to:"/",component:E.b,children:Object(N.jsx)(b.a,{className:e.name,children:"Serwis samochodowy"})}),L.map((function(t){return Object(N.jsx)(d.a,{underline:"none",component:E.b,to:t.href,children:Object(N.jsx)(b.a,{className:Object(A.a)(e.link,Object(i.a)({},e.activeLink,v.pathname.includes(t.href))),children:t.name})},t.name)})),Object(N.jsx)("div",{className:e.spacer}),Object(N.jsxs)(p.a,{size:"small",variant:"outlined",className:e.button,onClick:function(){return r("light"===n?"dark":"light",!0)},children:[Object(N.jsx)("div",{className:e.iconSpacer}),Object(N.jsx)(m.a,{in:"light"===n,children:Object(N.jsx)(O.a,{className:e.icon})}),Object(N.jsx)(m.a,{in:"dark"===n,children:Object(N.jsx)(g.a,{className:e.icon})})]}),l&&Object(N.jsx)(p.a,{variant:"outlined",className:e.button,startIcon:Object(N.jsx)(h.a,{className:e.iconSpacer}),children:o}),Object(N.jsx)(p.a,{variant:"outlined",onClick:function(){l?(x(),f("/")):f("/login")},children:l?"Wyloguj si\u0119":"Zaloguj si\u0119"})]})})},W=function(e){return function(t){Object.assign({},t);return Object(N.jsx)("div",{style:{padding:"100px 30px 30px"},children:Object(N.jsx)("div",{style:{margin:"auto",maxWidth:"1280px"},children:Object(N.jsx)(e,{})})})}},M=n(202),P=n(216),T=n(204),R=n(217),H=[{id:"email",type:"email",name:"Adres e-mail"},{id:"password",type:"password",name:"Has\u0142o"}],_=n(45),J=n.n(_),Z=J.a.create();Z.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers={Authorization:"Bearer "+t}),e}));var G=Z,K=Object(l.a)((function(e){return{root:{boxSizing:"border-box",width:"100%",maxWidth:"640px",margin:"auto",padding:"20px"},header:{marginBottom:"20px"},column:{display:"flex",flexDirection:"column"},input:{marginBottom:"10px"}}})),q=function(e){var t=!1;return Object.keys(e).forEach((function(n){e[n]||(t=!0)})),t},U=W((function(){var e=K(),t=Object(a.useState)(function(){var e={};return H.forEach((function(t){return e[t.id]=""})),e}()),n=Object(v.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),i=Object(v.a)(o,2),l=i[0],j=i[1],u=Object(s.f)(),h=Object(a.useContext)(B).handleLogin;return Object(N.jsxs)(M.a,{elevation:3,className:e.root,children:[Object(N.jsx)(b.a,{variant:"h1",component:"h1",className:e.header,children:"Zaloguj si\u0119"}),Object(N.jsxs)("form",{className:e.column,onSubmit:function(e){e.preventDefault(),G.post("".concat("http://vladar.tk:1337","/auth/local"),{identifier:r.email,password:r.password}).then((function(e){u("/"),h(e.data.user,e.data.jwt)})).catch((function(e){j(e.response?e.response.status:-1)}))},children:[H.map((function(t){return Object(N.jsx)(P.a,{variant:"outlined",label:t.name,name:t.id,type:t.type,className:e.input,onChange:function(e){return function(e,t){var n=Object(y.a)({},r);n[t]=e.target.value,j(!1),c(n)}(e,t.id)}},t.id)})),Object(N.jsx)(T.a,{in:!!l,children:Object(N.jsx)(R.a,{severity:"error",className:e.input,children:400===l?"B\u0142\u0119dne dane logowania":"Wyst\u0105pi\u0142 nieznany b\u0142\u0105d, spr\xf3buj ponownie"})}),Object(N.jsxs)(b.a,{className:e.input,children:["Nie masz jeszcze konta? ",Object(N.jsx)(d.a,{component:E.b,to:"/register",children:"Stw\xf3rz je teraz!"})]}),Object(N.jsx)(p.a,{variant:"outlined",color:"primary",type:"submit",disabled:q(r),children:"Zaloguj si\u0119"})]})]})})),Y=[{id:"email",type:"email",name:"Adres e-mail"},{id:"username",name:"Nazwa u\u017cytkownika"},{id:"password",type:"password",name:"Has\u0142o",autocomplete:"new-password"},{id:"repeatPassword",type:"password",name:"Powt\xf3rz has\u0142o",autocomplete:"new-password",sameAs:"password",sameAsError:"Podane has\u0142a nie s\u0105 takie same"}],Q=Object(l.a)((function(e){return{root:{boxSizing:"border-box",width:"100%",maxWidth:"640px",margin:"auto",padding:"20px"},header:{marginBottom:"20px"},column:{display:"flex",flexDirection:"column"},input:{marginBottom:"10px"}}})),V=function(e){var t=!1;return Object.keys(e).forEach((function(n){e[n]||(t=!0)})),t},X=W((function(){var e=Q(),t=Object(a.useState)(function(){var e={};return Y.forEach((function(t){return e[t.id]=""})),e}()),n=Object(v.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)({}),i=Object(v.a)(o,2),l=i[0],j=i[1],u=Object(a.useState)(!1),d=Object(v.a)(u,2),h=d[0],m=d[1],x=Object(s.f)(),O=Object(a.useContext)(B).handleLogin;return Object(N.jsxs)(M.a,{elevation:3,className:e.root,children:[Object(N.jsx)(b.a,{variant:"h1",component:"h1",className:e.header,children:"Zarejestruj si\u0119"}),Object(N.jsxs)("form",{className:e.column,onSubmit:function(e){e.preventDefault();var t=function(e,t){var n={};return e.forEach((function(e){var a=e.id,r=t[a];e.sameAs&&t[e.sameAs]!==r&&(n[a]=e.sameAsError)})),n}(Y,r);j(t),function(e){var t=!1;return Object.keys(e).forEach((function(n){e[n]&&(t=!0)})),t}(t)?m(-2):G.post("".concat("http://vladar.tk:1337","/auth/local/register"),{email:r.email,username:r.username,password:r.password}).then((function(e){x("/"),O(e.data.user,e.data.jwt)})).catch((function(e){m(e.response?e.response.status:-1)}))},children:[Y.map((function(t){return Object(N.jsx)(P.a,{variant:"outlined",label:t.name,name:t.id,type:t.type?t.type:"text",autoComplete:t.autocomplete,className:e.input,error:!!l[t.id],helperText:l[t.id],onChange:function(e){return function(e,t){var n=Object(y.a)({},r);n[t]=e.target.value,m(!1),c(n)}(e,t.id)}},t.id)})),Object(N.jsx)(T.a,{in:!!h,children:Object(N.jsx)(R.a,{severity:"error",className:e.input,children:-2===h?"Popraw b\u0142\u0119dy w formularzu":"Wyst\u0105pi\u0142 nieznany b\u0142\u0105d, spr\xf3buj ponownie"})}),Object(N.jsx)(p.a,{variant:"outlined",color:"primary",type:"submit",disabled:V(r),children:"Stw\xf3rz konto"})]})]})})),$=n(206),ee=n(210),te=n(209),ne=n(205),ae=n(207),re=n(208),ce=n(97),oe=Object(l.a)({table:{minWidth:650}}),ie=function(){var e=oe(),t=Object(a.useState)([]),n=Object(v.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){J.a.get("".concat("http://vladar.tk:1337","/specialists")).then((function(e){c(e.data),console.log("res :>> ",e)})).catch((function(e){console.log("err :>> ",e)}))}),[]),Object(N.jsx)(ne.a,{component:ce.a,children:Object(N.jsxs)($.a,{className:e.table,"aria-label":"simple table",children:[Object(N.jsx)(ae.a,{children:Object(N.jsxs)(re.a,{children:[Object(N.jsx)(te.a,{children:"Name"}),Object(N.jsx)(te.a,{children:"Surname"}),Object(N.jsx)(te.a,{children:"JobTitle"}),Object(N.jsx)(te.a,{children:"Availability"})]})}),Object(N.jsx)(ee.a,{children:r.map((function(e){return Object(N.jsxs)(re.a,{children:[Object(N.jsx)(te.a,{children:e.name}),Object(N.jsx)(te.a,{children:e.surname}),Object(N.jsx)(te.a,{children:e.job.jobTitle}),Object(N.jsx)(te.a,{children:e.available?"Available":"Not available"})]},e.id)}))})]})})},se=function(){return Object(N.jsx)("div",{children:"Hello this is main page"})},le=n(213),je=n(212),ue=n(211),de=n(88),be=n.n(de),pe=function(e){var t=Object(l.a)({root:{minWidth:"350px",maxWidth:"500px",flex:"1"},media:{height:300,objectFit:"cover",position:"center"}})();return Object(N.jsxs)(M.a,{className:t.root,children:[Object(N.jsx)(ue.a,{className:t.media,image:e.picture}),Object(N.jsx)(je.a,{children:Object(N.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"h2",children:Object(N.jsx)(be.a,{lines:2,locales:"none",children:e.title})})}),Object(N.jsx)(le.a,{children:Object(N.jsx)(p.a,{size:"small",color:"primary",onClick:e.onClick,children:"Zobacz wi\u0119cej"})})]})},he="http://vladar.tk:1337",me=function(){var e=Object(s.f)(),t=Object(a.useState)(),n=Object(v.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){G.get("".concat(he,"/posts")).then((function(e){c(e.data),console.log("res :>> ",e)})).catch((function(e){console.log("err :>> ",e)}))}),[]),Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(N.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Blog Serwisowy"}),Object(N.jsx)("div",{style:{display:"flex",gap:"20px",marginTop:"20px",flexWrap:"wrap",justifyContent:"center"},children:r&&r.map((function(t){return Object(N.jsx)(pe,{picture:"".concat(he).concat(t.picture.url),title:t.title,onClick:function(){e("/blog/".concat(t.id))},published_at:t.published_at},t.id)}))})]})},xe=n(89),Oe=n.n(xe),fe=n(90),ge=n.n(fe),ve=n(215),ye="http://vladar.tk:1337",we=function(){var e=Object(s.g)().id;console.log("id :>> ",e);var t=Object(a.useState)(),n=Object(v.a)(t,2),r=n[0],c=n[1],o=Object(s.f)();Object(a.useEffect)((function(){J.a.get("".concat(ye,"/posts/").concat(e)).then((function(e){console.log("resData :>> ",e.data),c(e.data)})).catch((function(e){return console.log("err :>> ",e)}))}),[]);var i=Object(l.a)({date:{fontSize:"14px",margin:"0",marginLeft:"6px",color:"#555555"},userName:{fontSize:"14px",marginBottom:"0",marginLeft:"6px",color:"#555555"},button:{border:"1px solid rgba(0, 0, 0, 0.23)",backgroundColor:"#FFFFFFB7"},content:{textAlign:"justify"}})();return Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(N.jsx)("div",{style:{marginBottom:"20px"},children:Object(N.jsx)(p.a,{className:i.button,startIcon:Object(N.jsx)(Oe.a,{}),onClick:function(){return o(-1)},children:"Wr\xf3\u0107"})}),Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:"20px"},children:[Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"20px",justifyContent:"space-between"},children:[Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(N.jsx)(ge.a,{}),Object(N.jsx)(b.a,{gutterBottom:!0,className:i.date,children:r&&function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}(r.published_at)})]}),r&&r.userID.username&&Object(N.jsxs)(b.a,{gutterBottom:!0,className:i.userName,children:["Dodano przez ",r.userID.username]})]}),Object(N.jsx)("div",{style:{width:"100%",height:"300px",marginBottom:"10px"},children:Object(N.jsx)("img",{src:r&&"".concat(ye).concat(r.picture.url),alt:"",style:{objectFit:"cover",width:"100%",height:"100%"}})}),Object(N.jsx)(b.a,{className:i.content,gutterBottom:!0,variant:"h1",component:"h1",children:r&&r.title})]}),Object(N.jsx)("div",{children:Object(N.jsx)(b.a,{className:i.content,gutterBottom:!0,variant:"body1",children:r&&Object(N.jsx)(ve.a,{children:r.description})})})]})},ke=Object(l.a)((function(e){var t;return{root:(t={boxSizing:"border-box",padding:"86px 175px",minHeight:"100vh",backgroundColor:e.palette.background.default},Object(i.a)(t,e.breakpoints.down("xs"),{padding:"64px 30px 30px"}),Object(i.a)(t,e.breakpoints.down(350),{padding:"64px 5% 5%"}),t)}})),Se=function(){var e=Object(a.useContext)(B),t=(e.isLoggedIn,e.handleLogout,ke());return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(D,{}),Object(N.jsx)("div",{className:t.root,children:Object(N.jsxs)(s.c,{children:[Object(N.jsx)(s.a,{path:"/",element:Object(N.jsx)(se,{})}),Object(N.jsx)(s.a,{path:"/login",element:Object(N.jsx)(U,{})}),Object(N.jsx)(s.a,{path:"/register",element:Object(N.jsx)(X,{})}),Object(N.jsx)(s.a,{path:"/blog",element:Object(N.jsx)(me,{})}),Object(N.jsx)(s.a,{path:"/blog/:id",element:Object(N.jsx)(we,{})}),Object(N.jsx)(s.a,{path:"/specialists",element:Object(N.jsx)(ie,{})})]})})]})},Ne=n(25),Fe=n(94),Ce=n(214),ze="HANDLE_LOGIN",Be="HANDLE_LOGOUT",Ee=["blocked","confirmed","email","username"],Ae=function(e,t){switch(t.type){case ze:localStorage.setItem("jwt",t.jwt);var n={};Ee.forEach((function(e){n[e]=t.user[e]}));var a={name:t.user.role.name,type:t.user.role.type};return Object(y.a)(Object(y.a)(Object(y.a)({},e),n),{},{role:a,jwt:t.jwt,isLoggedIn:!0});case Be:return Object(y.a)({},t.initialState);default:return Object(y.a)({},e)}},Ie=function(e){var t={blocked:!1,confirmed:!1,email:"",username:"",isLoggedIn:!1,role:{name:"",type:""},jwt:""},n=Object(a.useReducer)(Ae,localStorage.getItem("userState")?JSON.parse(localStorage.getItem("userState")):t),r=Object(v.a)(n,2),c=r[0],o=r[1];Object(a.useEffect)((function(){localStorage.setItem("userState",JSON.stringify(c)),localStorage.setItem("jwt",c.jwt)}),[c]);return Object(N.jsx)(B.Provider,{value:Object(y.a)(Object(y.a)({},c),{},{handleLogin:function(e,t){o({type:ze,user:e,jwt:t})},handleLogout:function(){o({type:Be,initialState:t})}}),children:e.children})},Le=function(e,t){G.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(n){return n&&n.response&&(401===n.response.status||403===n.response.status)&&(t(!0,"Nie masz dost\u0119pu do tej strony"),e("/")),Promise.reject(n)}))},De=n(218),We=function(){var e=Object(a.useContext)(F),t=e.snackbarOpen,n=e.snackbarError,r=e.snackbarMessage,c=e.closeSnackbar;return Object(a.useEffect)((function(){t&&setTimeout((function(){c()}),5e3)}),[t]),Object(N.jsx)(De.a,{open:t,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(N.jsx)(R.a,{severity:n?"error":"success",children:r})})},Me=function(e){var t=e.children,n=Object(a.useContext)(F),r=n.theme,c=(n.hasChanged,n.setTheme,n.openSnackbar),o=(n.closeSnackbar,Object(Ne.a)());Le(Object(s.f)(),c);var i=Object(a.useMemo)((function(){return Object(Fe.a)({palette:{type:r,background:{paper:"light"===r?"#FFFFFF":"#0A1929",default:"light"===r?"#F3F6F9":"#001E3C"},primary:{main:"light"===r?"#007FFF":"#3399FF"},text:{main:"light"===r?"#0A1929":"#FFFFFF",secondary:"light"===r?"#46505A":"#AAB4BE"}},typography:{fontFamily:['"IBM Plex Sans"',"Roboto","sans-serif"].join(", ")},shape:{borderRadius:"10px"},overrides:{MuiTypography:{root:{transition:o.transitions.create("color",{duration:o.transitions.duration.standard})},h1:{fontSize:"30px",fontWeight:"bold"},h2:{fontSize:"25px",fontWeight:"bold"},h3:{fontSize:"25px",fontWeight:"400"}},MuiLink:{root:{fontFamily:['"IBM Plex Sans"',"Roboto","sans-serif"].join(", ")}},MuiButton:{sizeSmall:{padding:"5px 10px",minWidth:"unset"}},MuiOutlinedInput:{root:{backgroundColor:"light"===r?"#FFFFFF":"#0A1929"}}}})}),[r]);return Object(N.jsx)(Ce.a,{theme:i,children:t})};o.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(z,{children:Object(N.jsx)(Ie,{children:Object(N.jsx)(E.a,{children:Object(N.jsxs)(Me,{children:[Object(N.jsx)(Se,{}),Object(N.jsx)(We,{})]})})})})}),document.getElementById("root"))}},[[143,1,2]]]);
//# sourceMappingURL=main.20ad9b50.chunk.js.map